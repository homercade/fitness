doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    title A-Team Fitness
    link(rel='icon', type='image/png', href='../../../../landing/images/muscle.png')
    link(rel='stylesheet', href='../../../../landing/css/bootstrap.min.css')
    link(rel='stylesheet', href='../../../../landing/css/animate.min.css')
    link(rel='stylesheet', href='../../../../landing/css/et-line-font.css')
    link(rel='stylesheet', href='../../../../landing/css/font-awesome.min.css')
    link(rel='stylesheet', href='../../../../landing/css/vegas.min.css')
    link(rel='stylesheet', href='../../../../landing/css/style.css')
    link(rel='stylesheet', href='../../../../assets/css/bootstrap-datepicker.css')
    link(href='https://fonts.googleapis.com/css?family=Rajdhani:400,500,700', rel='stylesheet', type='text/css')
    link(rel='stylesheet', href='../../../../assets/css/sweetalert2.min.css')
    link(href='../../../../assets/css/animate.css' rel='stylesheet')

  style.
    label.error{
      color:#ff6961;  
    }
    input.form-control.error{
      border:1px solid #ff6961;
    }
    select.form-control.error{
      border:1px solid #ff6961;
    }

  body
    // preloader section
    section.preloader
      .sk-circle
        .sk-circle1.sk-child
        .sk-circle2.sk-child
        .sk-circle3.sk-child
        .sk-circle4.sk-child
        .sk-circle5.sk-child
        .sk-circle6.sk-child
        .sk-circle7.sk-child
        .sk-circle8.sk-child
        .sk-circle9.sk-child
        .sk-circle10.sk-child
        .sk-circle11.sk-child
        .sk-circle12.sk-child
    // home section
    section#home
      .container
        .row
          .col-md-offset-2.col-md-8.col-sm-12
            .home-thumb
              h1.wow.fadeInUp(data-wow-delay='0.4s')
                | Welcome to
                br
                strong A-Team Fitness Center
                | .
              h3.wow.fadeInUp(data-wow-delay='0.6s')
                strong We
                |  get what we want, and 
                strong yours
                | , too.
              a.btn.btn-lg.btn-default.smoothScroll.wow.fadeInUp.hidden-xs(href='#', data-toggle='modal', data-target='#login', data-wow-delay='0.8s') Log-in
              a.btn.btn-lg.btn-success.smoothScroll.wow.fadeInUp(href='#', data-toggle='modal', data-target='#modal1', data-wow-delay='1.0s') Register
    // about section
    section#about
      .container
        .row
          .col-md-6.col-sm-12
            img.img-responsive.wow.fadeInUp(style='-webkit-mask-image:-webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));\
            mask-image: linear-gradient(to bottom, rgba(0,0,0,1), rgba(0,0,0,0));', src='../../../../landing/images/muscle.png', alt='About')
          .col-md-6.col-sm-12
            .about-thumb
              .section-title
                h1.wow.fadeIn(data-wow-delay='0.2s') A-Team Fitness Center
                h3.wow.fadeInUp(data-wow-delay='0.4s') A Philippine based gym software.
              .wow.fadeInUp(data-wow-delay='0.6s')
                p
                  | To be verbose, this is a fitness gym membership, trainer assignment, with billing and payment system. A software
                  | program that caters gym users (admins, trainers, staff, and their clients) to ease their daily transactions.
                p
                  strong A-Team Fitness Center
                  |  can grant interbranch membership, as well as freezing, and transferring of
                  |                 the customer's account to another successor. This system can recommend a set to you based on your input.
                  |                 You can also inquire a trainer based on your workout preferences. And lastly, this can record every transaction
                  |                 made, and generate report based on the data received.
    // footer section
    footer
      .container
        .row
          svg.svgcolor-light(preserveaspectratio='none', viewbox='0 0 100 102', height='100', width='100%', version='1.1', xmlns='http://www.w3.org/2000/svg')
            path(d='M0 0 L50 100 L100 0 Z')
          .col-md-4.col-sm-6
          .col-md-1.col-sm-1
          .col-md-4.col-sm-5
            h2 Our Center
            p.wow.fadeInUp(data-wow-delay='0.6s')
              | Sta. Mesa, MNL, Philippines
            p.copyright-text
              | Copyright © 2018 HJRD
              br
              |  Designed by
              a(rel='nofollow', href='#', target='_parent') 
              | HJRD
            ul.social-icon
              li
                a.fa.fa-facebook.wow.bounceIn(href='#', data-wow-delay='0.9s')
              li
                a.fa.fa-twitter.wow.bounceIn(href='#', data-wow-delay='1.2s')
              li
                a.fa.fa-behance.wow.bounceIn(href='#', data-wow-delay='1.4s')
              li
                a.fa.fa-dribbble.wow.bounceIn(href='#', data-wow-delay='1.6s')
    // modal
    #modal1.modal.fade(tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog.modal-lg
        .modal-content.modal-popup
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
          form#form.needs-validation(method='POST', action='/signup', autocomplete='off' novalidate)
            h2(style='color:black; margin-left:30px;') REGISTER
            .modal-body
              .container-fluid
                .row
                  .col-xs-12
                    h5 Personal Info
                    hr
                .container-fluid(style='padding:1rem 4rem 1rem 4rem;')
                  .row
                    .col-md-6
                      .form-group
                        label#fname.control-label.required First Name <span class='r'>*</span> 
                        input.form-control(type='text' name='fname' required)
                    .col-md-6
                      .form-group
                        label.control-label Last Name <span class='r'>*</span> 
                        input.form-control(type='text' name='lname' required)
                  .row
                    .col-md-6
                      .input-group
                        .input-group-addon Gender: <span class='r'>*</span> 
                        label.radio
                          | Male
                          input(type='radio', checked='', name='gen' value='Male')
                          span.dot
                        label.radio
                          | Female
                          input(type='radio', name='gen' value='Female')
                          span.dot
                    .col-md-6
                      .form-group
                        label.control-label Date of Birth <span class='r'>*</span> 
                        input.date.form-control(type='text' name='bday'  required)
                  .row
                    .col-md-9
                      .form-group
                        label.control-label Address <span class='r'>*</span>
                        input.form-control(type='text' name='str' placeholder='Street Name..' required)
                    .col-md-3 
                      .form-group
                        label.control-label(style="color:white") Address  
                        input.form-control(type='text' name='city' placeholder='City..' required)
                  .row
                    .col-md-6
                      .form-group
                        label.control-label Mobile Number <span class='r'>*</span> 
                        input.form-control(type='number', placeholder='09xxxxxxxxx' name='mobile' required)
                    .col-md-6
                      .form-group
                        label.control-label Email  
                        input.email.form-control(type='email' name='email' value='')
                        #prompt2
                .row
                  .col-md-12
                    h5 Login Information
                    hr
                .container-fluid(style='padding:1rem 4rem 1rem 4rem;')
                
                  .row
                    .col-md-12
                      .form-group
                        label.control-label Username <span class='r'>*</span> 
                        input.username.form-control(type='text' name='username' required)
                        #prompt
                .row
                  .col-md-12
                    h5 More Information
                    hr
                .container-fluid(style='padding:1rem 4rem 1rem 4rem;')
                  .row
                    .col-md-12
                      .form-group
                        label.control-label Membership <span class='r'>*</span> 
                        select#membership.form-control.required(name='membership') 
                          each ct in cat
                            option.hidden(value='') Select Membership... 
                            option.membershipOption(value=`${ct.memrateid}` memName=`${ct.membershipname}`) #{ct.memclassname} - #{ct.membershipname} (#{ct.memperiod} MONTHS) - ₱ #{ct.memfee}
                        a#detailsCol(style="text-decoration:none; cursor:pointer; display:none" data-toggle="modal" data-target="#modal_details") 
                          i See details of selected Membership
                  .row
                    .col-md-6#branchCol(style='display:none')
                      .form-group
                        label.control-label Branch <span class='r'>*</span> 
                        select#branch.form-control.required(name='branch')
                          option.hidden(value='5') Select Branch...
                          //-   option(value='' + br.branchID) #{br.branchname}
                        //- p
                        //-   | Only For Exclusive membership for interbranch leave it unfilled  

                //-INTERESTED AREA      
                    //- .col-md-6
                    //-   .form-group
                    //-     label.control-label Interested Area <span class='r'>*</span> 
                    //-     select.form-control.required(name='specs')
                    //-       each sp in specs
                    //-         option.hidden(value='') Select Interest... 
                    //-         option(value='' + sp.specialID) #{sp.specialname}
                //-STUDENT DISCOUNT    
                    //-     label.checkbox
                    //-       | Are you a Student?
                    //-       input#student(type='checkbox' value='.10')
                    //-       span.check
                    //-     p#1 Uncheck if you are unwilling to provide proof.
                    //- .col-md-12(style='color:gray; font-size:10pt')
                    //-   p#2(style='display: none')
                    //-     | You can avail a student discount if we can confirm your claim. Give us proof (eg. student ID, registration
                    //-     | card etc.) through our branch near you.
                    //-     br
                    //-     br
                    //-     | Or upload a scanned photo of your ID (NOTE: We may not accept it if we think it's fraud. In case
                    //-     |                         that happens please consult us personally)
                    //-     input#file.inputfile(type='file')
                    //-     br
                    //-     b NOTE:
                    //-     |  We will not accept your request until you are verified.
            .modal-footer
              button.btn.btn-default(type='button', data-dismiss='modal') Cancel
              button#reg.btn.btn-primary(type='submit') Register
    // modal
    #login.modal.fade(tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog.modal-sm
        .modal-content.modal-popup
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
            h2(style='color:black; margin-left:30px;') Login
          form(action='/login', method='post')
            .modal-body
              .container-fluid
                .row
                  .col-md-12
                    .form-group
                      label.control-label Username
                      input.form-control(type='text', name='userID')
                  .col-md-12
                    .form-group
                      label.control-label Password
                      input.form-control(type='password', name='password')
                center
                  button.btn.btn-primary(type='submit') Log in
    #success.modal.fade(tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog.modal-sm
        .modal-content.modal-popup
          form(action='POST', method='')
            .modal-body
              .container-fluid
                .row
                  .col-md-12
                    p
                      br
                      | Success! Your application has been sent for approval.
                center
                  button.btn.btn-primary(type='button', data-dismiss='modal') Close
    #modal_details.modal.fade(tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog.modal-sm
        .modal-content.modal-popup
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') ×
            h2(style='color:black; margin-left:15px;') Details: 
            .modal-body
              p(style="font-size: 12pt") <b>Membership Type:</b> Details ng Membership Type
             
    //- // Back top
    a.go-top(href='#back-top')
      i.fa.fa-angle-up
    //- // javscript js
    

    script(src='../../../../landing/js/jquery.js')
    script(src='../../../../assets/js/bootstrap-datepicker.js')
    script(src='../../../../landing/js/bootstrap.min.js')
    script(src='../../../../landing/js/vegas.min.js')
    script(src='../../../../landing/js/wow.min.js')
    script(src='../../../../landing/js/smoothscroll.js')
    script(src='../../../../landing/js/custom.js')
    script(src='../../../../assets/js/jquery.validate.js')
    script(src='../../../../assets/js/sweetalert2.all.min.js')
style.

  .r {
    color: #ff6961;
  }

  label.error {
    color: #ff6961; 
  }

  input.form-control.error {
    border: 1px solid #ff6961;
  }

  select.form-control.error {
    border: 1px solid #ff6961;
  }
script.
      $(document).ready(function(){
        
        $('.username').keyup(function () {
          var username = $(this).val()
          if (username.length >= 4) {
            $.post('/signup/users').done(function (data) {
              console.log(data)
              for (i = 0; i < data.length; i++) {
                if (data[i].userusername != username) {
                  $('#prompt').empty()
                } else {
                  $('.username').addClass('inv')
                  $('.username.input.form-control').addClass('inv')
                  $('#prompt').text('Username is already taken')
                  $('#prompt').css({
                    'color':'#ff6961',
                    'font-weight':'bold'
                  })
                }
              }
            })
          }
          else{
            $('#prompt').empty()
          }
        })

        $('.email').keyup(function () {
          var email = $(this).val()
          if (email.length >= 4) {
            $.post('/signup/users').done(function (data) {
              console.log(data)
              for (i = 0; i < data.length; i++) {
                if (data[i].useremail != email) {
                } else {
                  $('.email').addClass('inv')
                  $('.email.input.form-control').addClass('inv')
                  $('#prompt2').text('Email is already taken')
                  $('#prompt2').css({
                    'color':'#ff6961',
                    'font-weight':'bold'
                  })
                }
              }
            })
          }
          $('#prompt2').empty()
        })

        
        $(document).on("submit", "#form", function(e){
          if ( $('.username').hasClass('inv') || $('.email').hasClass('inv')){
            e.preventDefault()
            return  false
          }else{
            continue
          }
        })

      

        //- var modals = [];
        //- modals.push({title: 't1', text: 'text1', toast:true})
        //- modals.push({title: 't2', text: 'text2', toast:true})
        //- swal.queue(modals);

      var getUrl = window.location
      var baseUrl = getUrl .protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1]
      if (`${baseUrl}?incorrect` == getUrl){

        const toast = swal.mixin({
          toast: true,
          position: 'top',
          showConfirmButton: false,
          timer: 3000,
          width: '1000px',
        })
        toast({
          type: 'error',
          title: 'Incorrect username or password'
        })
        $("#login").modal('show')
      }

       $('#membership').on('change', function(){
         var selected = $('#membership').val()
         if($(`.membershipOption[value='${selected}']`).attr('memName') == 'Exclusive'){
           $('#branchCol').css('display', 'block')
           $.post('/signup/query/branch').done(function(data){
             console.log(data)
             for(var i=0; i< data.length; i++){
               $('#branch').append(`<option value='${data[i].branchID}'>${data[i].branchname}</option>`)
             }
           })
         }
         else{
           $('#branchCol').css('display', 'none')
         }
       })

      $('#membership').on('change', function(){
        let selected = $('#membership').val()
        if($(`.membershipOption[value='${selected}']`)){
          $('#detailsCol').css('display', 'block')
        }
      })
       
     })

      

script.
      $(document).ready(function () {
      $("#login").on("show", function () {
      $("body").addClass("modal-open");
      }).on("hidden", function () {
      $("body").removeClass("modal-open")
      });
      $('#type').click(function () {
      if ($(this).val() == 2) {
      $('#branch').prop("disabled", false);
      } else {
      $('#branch').prop("disabled", true);
      }
      });

      $(".date").datepicker({
        changeMonth: true,
        changeYear: true,
        todayHighlight: true,
        maxViewMode: 2,
        startView: 2,
        autoclose: true
      });

      $(function () {
      $("#student").click(function () {
      if ($(this).is(":checked")) {
      $("#2").show();
      $("#1").hide();
      } else {
      $("#2").hide();
      $("#1").show();
      }
      });
      });

      $('.needs-validation').validate({
        rules:{
          username: {
            minlength: 4
            },
          mobile:{
            maxlength: 11,
            minlength: 11
            },
            
        },
        messages:{
          username:{
            minlength: 'Username shouldn\'t be less than four characters'
          },
          mobile:{
            maxlength: 'Mobile number should be exactly 11 digits',
            minlength: 'Mobile number should be exactly 11 digits'
          }
        }
      });
      });
